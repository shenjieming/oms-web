<div class="row" ng-controller="AdditionalController">
    <div class="tools">
        <h5 style="float:left; font-weight:bold; margin-left:8px;">
            <i class="fa fa-file-archive-o"></i>
            手术订单
            <span style="color: #0033FF">[{{sono}}]</span>
            <span style="color: #FF3300">({{PageData.statusName}})</span>

        </h5>
        <span style="float:right;">
            <a class="btn btn-primary" ng-click="AdditionalServiice.Submit()"><i class="fa fa-shopping-cart"></i>追加</a>
            <a class="btn btn-primary" ng-click="goLastPage()"><i class="fa fa-reply"></i> 返回</a>
        </span>
    </div>
    <div ng-materials="" ng-model="PageData.prodLns" ng-operat="MaterialsConfig.operat" ng-line="ProductConfig.useLine.medProdLnCode" ng-change="ProductConfig.useLine.medMaterias"></div>
    <div ng-productline="{{PageData.sOCreateByOrgCode}}" ng-model="PageData.prodLns" ng-operat="ProductConfig.operat" ng-cargo-model="PageData.sOOIOrgCode"></div>
    <div>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active" href="#Original" data-toggle="tab"><a>原始订单</a></li>
            <li role="presentation" href="#Accurate" data-toggle="tab"><a>精确订单</a></li>
            <li role="presentation" href="#Additional" data-toggle="tab"><a>追加物料</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="Original">
                <div ui-view="Original"></div>
            </div>
            <div role="tabpanel" class="tab-pane" id="Accurate">
                <div ui-view="Accurate"></div>
            </div>
            <div role="tabpanel" class="tab-pane" id="Additional">
                <div class="row-fluid">
                    <div class="widget-box">
                        <div class="widget-title bg_ly">
                            <span class="icon"><i class="fa icon-chevron-down"></i></span>
                            <h5 style="width:80%" data-toggle="collapse" href="#Add_ProductInformation">追加物料</h5>
                            <a href="javascript:void(0)" class="btn" style="display:none;"><i class="fa fa-folder-open"></i>选择模板</a>
                        </div>
                        <div id="Add_ProductInformation" class="widget-content nopadding collapse in">
                            <div class="control-group">
                                <div style="width:100%;">
                                    <span style=" color: #808080; line-height:30px;margin-left:25px" ng-show="!PageData.medKits.length">未使用套件，您可以添加您配置好的套件</span>
                                    <a class="btn btn-warning" ng-click="MedKitsConfig.operat.show()" style="float:right;margin-right:10px;"><i class="fa fa-arrows"></i>添加套件</a>
                                </div>
                                <div ng-med-kits="med" ng-model="MedKitsConfig.useData" ng-operat="MedKitsConfig.operat" ng-cargo-model="PageData.sOOIOrgCode"></div>
                            </div>
                            <div class="control-group" ng-show="PageData.medKits.length">
                                <div class="main-box-body clearfix" style="padding: 15px; max-height: 450px; overflow: auto; width: 100%;">
                                    <div class="table-responsive">
                                        <table class="table table-bordered tab-striped">
                                            <thead>
                                                <tr>
                                                    <th><span>序号</span></th>
                                                    <th><span>套件编码</span></th>
                                                    <th><span>套件名称</span></th>
                                                    <th><span>套件类型</span></th>
                                                    <th><span>使用数量</span></th>
                                                    <th><span>所在仓库</span></th>
                                                    <th><span><a href="javascript:void(0)" ng-click="WarehouseConfig.GetKitInventory()"><i class="fa fa-cubes"></i> 全部库存</a> </span> </th>
                                                    <th><span>库区</span></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="row in PageData.medKits">
                                                    <td>{{$index+1}}</td>
                                                    <td>
                                                        {{row.kitCode}}
                                                    </td>
                                                    <td>
                                                        {{row.kitName}}
                                                    </td>
                                                    <td>
                                                        {{row.kitTypeName}}
                                                    </td>
                                                    <td>
                                                        <input type="number" value="0" ng-model="row.reqQty" style="width:60px" min="0" />
                                                    </td>
                                                    <td>
                                                        <select ng-model="row.estMedMIWarehouse" ng-change="WarehouseConfig.GetKitInventory(row)" ng-options="item.id as item.text for item in WarehouseConfig.WarehouseList">
                                                            <option value="">请选择仓库</option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <a href="javascript:void(0)" ng-click="WarehouseConfig.GetKitInventory(row)">{{row.inventory?row.inventory:"当前库存"}}</a>
                                                    </td>
                                                    <td>
                                                        {{row.zoneName}}
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="control-group">

                                <div class="col-lg-3">
                                    <div class="control-group" style="display:block;">
                                        <a class="btn btn-warning" ng-click="ProductConfig.operat.show()"><i class="fa fa-medkit"></i>加产品线</a>
                                        <a class="btn btn-danger" ng-click="ProductConfig.deleteLine()"><i class="fa fa-scissors"></i>删除</a>
                                        <div id="ProductConfig" ng-tree="" ng-show="PageData.prodLns.length" ng-setting="ProductConfig.tree.setting" ng-data="ProductConfig.tree.data" ng-model="ProductConfig.tree.obj"></div></span>
                                    </div>
                                </div>
                                <div class="col-lg-9" ng-show="PageData.prodLns.length">
                                    <div class="control-group">
                                        <label> 品牌名称：{{ProductConfig.useLine.medBrandCodeName}}</label>
                                        <label style="width:32%;">产品线名称：{{ProductConfig.useLine.medProdLnCodeName}}</label>
                                        <label ng-show="">
                                            <span style="float:left">工具情况：</span>
                                            <input type="checkbox" id="checkbox" class="chkbox"
                                                   ng-checked="ProductConfig.useLine.isChecked" ng-model="ProductConfig.useLine.isChecked">
                                            <label for="checkbox" style="float:left"></label>
                                            <span ng-show="ProductConfig.useLine.isChecked">需要</span>
                                            <span ng-show="!ProductConfig.useLine.isChecked">不需要</span>
                                        </label>
                                    </div>
                                    <div class="control-group">
                                        <label style="width:90%">
                                            备注信息：{{ProductConfig.useLine.remark}}
                                        </label>
                                        <a class="btn btn-warning" ng-click="MaterialsConfig.operat.show()"><i class="fa fa-link"></i>添加物料</a>
                                    </div>
                                    <div class="control-group" ng-show="!ProductConfig.useLine.medMaterias.length">
                                        <label style="width:100%;color:red;">未配置物料，请对当前产品线添加物料...</label>
                                    </div>
                                    <span ng-show="ProductConfig.useLine.medMaterias.length">
                                        <div class="control-group">
                                            <div style="display: inline-block; width: 99%; padding: 5px;">
                                                <a class="btn btn-primary" ng-click="MaterialsConfig.GetShowMaterial()"><i class="fa fa-puzzle-piece"></i> 全部</a>
                                                <a class="btn btn-primary" ng-click="MaterialsConfig.GetShowMaterial('IMPLANT')"><i class="fa fa-puzzle-piece"></i> 植入物</a>
                                                <a class="btn btn-primary" ng-click="MaterialsConfig.GetShowMaterial('TOOL')"><i class="fa fa-wrench"></i> 工具</a>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="main-box-body clearfix" style="max-height: 350px; overflow: auto; width: 100%;">
                                                <div class="table-responsive">
                                                    <table class="table table-bordered tab-striped">
                                                        <thead>
                                                            <tr>
                                                                <th><span>序号</span></th>
                                                                <th><span>物料编码</span></th>
                                                                <th><span>物料名称</span></th>
                                                                <th><span>物料类型</span></th>
                                                                <th><span>物料规格</span></th>
                                                                <th><span>使用数量</span></th>
                                                                <th><span>使用仓库</span> </th>
                                                                <th><span><a href="javascript:void(0)" ng-click="WarehouseConfig.GetMedmaterialInventory()"><i class="fa fa-cubes"></i> 全部库存</a> </span> </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="row in MaterialsConfig.Material">
                                                                <td>{{$index+1}}</td>
                                                                <td>
                                                                    {{row.medMICode}}
                                                                </td>
                                                                <td>
                                                                    {{row.medMIName}}
                                                                </td>
                                                                <td>
                                                                    {{row.categoryByPlatformName}}
                                                                </td>
                                                                <td>
                                                                    {{row.specification}}
                                                                </td>
                                                                <td>
                                                                    <input type="number" value="0" ng-model="row.reqQty" style="width:60px" min="0" />
                                                                </td>
                                                                <td>
                                                                    <select ng-model="row.medMIWarehouse" ng-change="WarehouseConfig.GetMedmaterialInventory(row)" ng-options="item.id as item.text for item in WarehouseConfig.WarehouseList">
                                                                        <option value="">请选择仓库</option>
                                                                    </select>
                                                                </td>
                                                                <td>
                                                                    <a href="javascript:void(0)" ng-click="WarehouseConfig.GetMedmaterialInventory(row)">{{row.inventory?row.inventory:"当前库存"}}</a>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </span>
                                </div>
                                <label style="width:100%;color:red;" ng-show="!PageData.prodLns.length">为选择产品线，请添加产品线...</label>
                            </div>
                        </div>
                    </div>

                    <div ui-view="Library"></div>
                </div>
            </div>
        </div>

    </div>
    <div ng-order-approval="" ng-model="PageData" ng-operat="ApprovalConfig.Operat"></div>
    <div ng-sign="" ng-model="PageData" ng-operat="SignConfig.Operat"></div>
    <div class="tools">
        <span style="float:right;">
            <a class="btn btn-primary" ng-show="View.Competence.approval" ng-click="ApprovalConfig.Operat.show()"><i class="fa fa-eye"></i>审批</a>
            <a class="btn btn-primary" ng-show="View.Competence.sign" ng-click="SignConfig.Operat.show()"><i class="fa fa-eye"></i>签收</a>
            <a class="btn btn-primary" ng-click="goLastPage()"><i class="fa  fa-reply"></i> 返回</a>
        </span>
    </div>
</div>